@use 'sass:map';
@use 'sass:string';
@use 'sass:list';
@use 'sass:meta';

@function find($map, $key) {
	@if type-of($map) != map {
			@debug "lookup.find map type is #{type-of($map)}, returning null";
			@return null;
		}

	$parts: string.split($key, '.');
	$len: list.length($parts);
	// @debug "find: #{$key} has #{$len} parts";
	@if $len < 1 {
		@return null;
	}
	@if $len == 1 {
		@return map.get($map, $key);
	}
	$submap: map.get($map, list.nth($parts, 1));
	$partInd: string.index($key, '.');
	$subkey: string.slice($key, $partInd + 1);
	@return find($submap, $subkey);
	// @if type-of($ret) == string or type-of($ret) == number {
	// 	@return $ret;
	// }
	// @return null;
}
